version: 1
frontend:
  env:
    variables:
      VITE_API_URL: $VITE_API_URL
      FRONTEND_URL: $FRONTEND_URL
  phases:
    preBuild:
      commands:
        - echo "exporting variables for vite"
        - export VITE_API_URL=$VITE_API_URL
        - export FRONTEND_URL=$FRONTEND_URL
        - npm ci
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/* 